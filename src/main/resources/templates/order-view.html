<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments :: html_head" />
<body class="app sidebar-mini rtl">
	<div th:replace="fragments :: app-layout"></div>


	<main class="app-content">
         <div class="row">
            <div class="col-md-12">
               <form class="dashboardicon" style="margin-top: 0;" th:action="@{/order}" method="post" enctype="multipart/form-data">
                  <fieldset style="margin-top: 0;" id="printTable" >
                  <legend style="text-align:center; padding-bottom: 40px;" th:text="${header}" ></legend>
                     <div class="col-lg-12 flexdisplay">
                        <div class="col-lg-3 col-xs-12 stock-in-marg">
                           <div class="image-upload">
								<label for="itemImage">
									<img th:src="*{order.itemImageBlob}" class="stock-in-img" >
								</label>
								<input type="file" id="itemImage" th:readonly="${param.action[0]=='View'}">
							</div>
                        </div>
                        <div class="col-lg-3 col-xs-12 stock-in-marg">
                          <label style="text-align: left; display: block;">Supplier</label>
                           <input type="text" name="supplier" placeholder="Supplier" th:value="${order.supplier}" th:readonly="${param.action[0]=='View'}" >
                        </div>
                        <div class="col-lg-3 col-xs-12 stock-in-marg">
                          <label style="text-align: left; display: block;">Size</label>
                           <input type="text" name="size" placeholder="Size" th:value="${order.size}" th:readonly="${param.action[0]=='View'}" >
                        </div>
                        <div class="col-lg-3 col-xs-12 stock-in-marg">
                          <label style="text-align: left; display: block;">Quantity</label>
                           <input type="number" name="quantity" placeholder="Quantity" th:value="${order.quantity}" th:readonly="${param.action[0]=='View'}" 
						   oninvalid="this.setCustomValidity('Quantity cannot be 0 or blank')" oninput="this.setCustomValidity('')" onchange="calculateAmount()">
                        </div>
                     </div>
                     <div class="col-lg-12 flexdisplay">
                        <div class="col-lg-3 col-xs-12 stock-in-marg">
                           <div class="image-upload">
								<label for="colourImage">
									<img th:src="*{order.colourImageBlob}" class="after-col stock-in-img" />
								</label>
								<img src="" class="before-col" style="display: none;" />
								<canvas style="display: none;"></canvas>
								<input type="file" name="colourImage" id="colourImage" th:readonly="${param.action[0]=='View'}">
							</div>
                        </div>
						<div class="col-lg-3 col-xs-6 stock-in-marg">
							<label style="text-align: left; display: block;">Product</label>
							<select class="form-control" name="productId" id="products" style="height: 48px;" onchange="onProductChange(this.value)" 
								th:disabled="${param.action[0]=='View'}" required>
								<option selected disabled="disabled" value="">Product</option>
								<option style="color: #333;" th:each="product : ${products}" th:text="${product.name}" 
									th:value="${product.id}" th:selected="${product.name==order.item?.product?.name}"></option>
							</select>
						</div>
						<div class="col-lg-3 col-xs-6 stock-in-marg">
							<label style="text-align: left; display: block;">Item</label>
							<select class="form-control" name="itemId" id="items" style="height: 48px;" onchange="onItemChange(this.value)" 
								th:disabled="${param.action[0]=='View'}" required>
								<option selected disabled="disabled" value="">Item</option>
								<option selected th:text="${order.item?.name}" th:value="${order.item?.id}"></option>
							</select>
						</div>
                        <div class="col-lg-3 col-xs-12 stock-in-marg">
                          <label style="text-align: left; display: block;">Unit</label>
                           <select class="form-control" name="unit" id="units" style="height: 48px;" th:disabled="${param.action[0]=='View'}" 
									onchange="resetQuantity();" required>
								<option selected disabled="disabled" value="">Unit</option>
								<option selected th:text="${order.unit}" ></option>
							</select>
                        </div>
                     </div>
                     <div class="col-lg-12 flexdisplay">
						<div class="col-lg-3 col-xs-12 stock-in-marg">
                          <label style="text-align: left; display: block;">Date</label>
                           <input type="Date" name="date" placeholder="Date" th:value="${order.date}" th:readonly="${param.action[0]=='View'}" ><i class="moz-cover-clear"></i>
                        </div>
                        <div class="col-lg-3 col-xs-12 stock-in-marg">
                          <label style="text-align: left; display: block;">Price</label>
                           <input type="number" name="price" placeholder="Price" min="0" step=".01" th:value="${order.price}" onchange="calculateAmount()" th:readonly="${param.action[0]=='View'}" >
                        </div>
                        <div class="col-lg-3 col-xs-12 stock-in-marg">
                           <label style="text-align: left; display: block;">Amount</label>
                           <input type="number" name="amount" placeholder="Amount" min="0" step=".01" th:value="${order.amount}" th:readonly="${param.action[0]=='View'}" >
                        </div>
						<div class="col-lg-3 col-xs-12 stock-in-marg">
                          <label style="text-align: left; display: block;">Reference</label>
                           <input type="text" name="reference" placeholder="Reference" th:value="${order.reference}" th:readonly="${param.action[0]=='View'}" >
                        </div>
                     </div>
					 <div class="col-lg-12">
                        <div class="col-lg-12 col-xs-12 stock-in-marg">
                          <label style="text-align: left; display: block;">Remarks</label>
                           <input type="text" name="remarks" placeholder="Remarks" th:value="${order.remarks}" th:readonly="${param.action[0]=='View'}" >
                        </div>
                     </div>
                     <input type="button" name="cancel" class="previous action-button-previous" value="Cancel" onclick="window.history.back()" >
                     <input type='hidden' th:value="${order.id}" id="id" name='id'>
                     <input th:if="'Print' == ${submitValue}" type="button" name="action" class="submit action-button" value="Print" onclick="printData()" >
                     <input th:if="'Edit' == ${submitValue}" type="submit" th:formaction="@{/saveOrderEdit}" name="action" class="submit action-button" value="Save">
               </fieldset>
               </form>
			   <div>
					<p name="before-compression"></p>
					<p name="after-compression"></p>
				</div>
				
            </div>
         </div>
      </main>
	  
	  <div th:replace="fragments :: img_upd_modal"></div>
	  
	  <div th:replace="fragments :: main_scripts"></div>
	  <div th:replace="fragments :: add_edit_scripts"></div>
</body>
</html>